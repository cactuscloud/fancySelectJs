function fancySelectJs(e){this.DELIMITER=",",this.select=null,this.selectText=null,this.dropdown=null,this.template=null,this.parent=null,this.multiple=!1,this.disabled=!1,this.length=0,this.options=[],this.values=[],this.selectedIndices=[],this.frameRequested=!1,this.dropdownTop,this.dropdownLeft,this.dropdownWidth,this.dropdownVisible=!1,this.mouseY,this.mouseX,this.searchString="",this.searchTimer,this.initialized=!1,this.hoverIndex=0,this.placeholder="",this.multiplePlaceholder="Multiple Values",this.allPlaceholder="All",this.allIndex=null,this.allIndexSelected=!1,"undefined"!=typeof e&&e&&this.init(e)}fancySelectJs.prototype.init=function(e){if(null==e.fancySelectJs&&!this.initialized){if(this.template=e,"undefined"==typeof e||!e)throw new TypeError("fancySelectJs requires a valid HTML SELECT element to initialize.");if("string"==typeof e&&(e=document.getElementById(e)),"undefined"==typeof e.tagName||!e.tagName)throw new TypeError("fancySelectJs requires a valid HTML SELECT element to initialize.");this.placeholder=e.getAttribute("data-placeholder")||"",this.multiple=e.multiple,e.oldSize=e.size,e.size=1;var t=[];e.hasAttribute("data-value")?this.multiple?t=e.getAttribute("data-value").split(this.DELIMITER):t.push(e.getAttribute("data-value")):this.multiple?t=($(e).val()+"").split(","):t.push($(e).val());for(var i,s,o,n=e.children,l=0,h=n.length;h>l;l++)i=n[l],this.multiple&&i.hasAttribute("data-all")&&(this.allIndex=l),s=i.getAttribute("value").trim(),o={value:s,label:n[l].innerHTML.trim()},this.options.push(o),t.includes(s)&&(this.values.push(o),this.selectedIndices.push(l),this.allIndex==l&&(this.allIndexSelected=!0));e.hasAttribute("data-all-index")&&(this.allIndex=parseInt(e.getAttribute("data-all-index")));var r=document;if(e.hasAttribute("data-scroll-parent")){var d=r.getElementById(e.getAttribute("data-scroll-parent"));this.parent="undefined"!=typeof d&&null!=d?d:r.body}else this.parent=r.body;this.buildGui(e),this.setEventListeners(),this.updateValues(),1==this.values.length&&(this.hoverIndex=this.selectedIndices[0]),e.disabled&&this.disable(),$(e).hide(),e.parentElement.insertBefore(this.select,e),this.parent.appendChild(this.dropdown),e.fancySelectJs=this,this.initialized=!0}},fancySelectJs.prototype.buildGui=function(e){var t=document,i=t.createElement("div");i.className="fancySelectJs "+e.className,i.display=$(e).css("display"),i.style.display=$(e).css("display"),i.style.opacity=$(e).css("opacity"),i.setAttribute("role","listbox");var s=t.createElement("div");s.className="select",s.tabIndex=0,s.style.lineHeight=$(e).outerHeight()+"px",s.style.height=$(e).css("height"),i.appendChild(s);var o=t.createElement("div");o.className="fancySelectJs_dropdown",this.multiple&&o.setAttribute("data-multiple","true");for(var n=e.children,l="",h=0,r=n.length;r>h;h++)l+=this.multiple?'<div role="option" class="option check" aria-checked="false">'+n[h].innerHTML+"</div>":'<div role="option" class="option" aria-selected="false">'+n[h].innerHTML+"</div>";o.innerHTML=l,this.selectText=s,this.select=i,this.dropdown=o},fancySelectJs.prototype.setEventListeners=function(){$(window).on("resize orientationchange",this.queuePositionDropdown.bind(this)),$(this.template).closest("form").on("reset",this.reset.bind(this)),$(this.select).on("click",this.selectClick.bind(this)),$(this.selectText).on("blur",this.blur.bind(this)),$(this.selectText).on("keydown",this.keydown.bind(this)),$(this.dropdown).on("mousedown",this.dropdownMousedown.bind(this)),$(this.dropdown.children).on("click",this.optionClick.bind(this)),$(this.dropdown.children).on("mousemove",this.optionHover.bind(this))},fancySelectJs.prototype.destroy=function(){try{clearTimeout(this.searchTimer),this.template.fancySelectJs=null,this.dropdown.innerHTML="",this.select.innerHTML="",this.dropdown.parentNode.removeChild(this.dropdown),this.select.parentNode.removeChild(this.select),this.select=null,this.selectText=null,this.dropdown=null,this.template.size=this.template.oldSize,$(this.template).show(),this.template=null,this.parent=null,this.options=null,this.values=null,this.selectedIndices=null}catch(e){console.log(e)}},fancySelectJs.prototype.updateValues=function(){(this.allIndexSelected||null!=this.allIndex&&0==this.values.length)&&(this.values=[],this.selectedIndices=[],this.values.push(this.options[this.allIndex]),this.selectedIndices.push(this.allIndex),this.allIndexSelected=!0);for(var e,t=this.dropdown.children,i=0,s=t.length;s>i;i++)e=t[i],e.removeAttribute("data-hover"),this.selectedIndices.includes(i)?(e.setAttribute("data-selected","true"),this.multiple?e.setAttribute("aria-checked","true"):e.setAttribute("aria-selected","true")):(e.removeAttribute("data-selected"),this.multiple?e.setAttribute("aria-checked","false"):e.setAttribute("aria-selected","false"));var o=this.selectedIndices.length;if(0==o?(this.selectText.innerHTML=this.placeholder,this.selectText.setAttribute("data-placeholder","true")):(this.selectText.removeAttribute("data-placeholder"),this.selectText.innerHTML=1==o?this.values[0].label:o==t.length?this.allPlaceholder:this.multiplePlaceholder),this.allIndexSelected){this.values=[],this.selectedIndices=[];for(var i=0,s=this.options.length;s>i;i++)i!=this.allIndex&&(this.values.push(this.options[i]),this.selectedIndices.push(i))}if(this.initialized||this.allIndexSelected){for(var n=[],i=0,s=this.values.length;s>i;i++)n.push(this.values[i].value);$(this.template).val(n),$(this.template).trigger("onchange")}},fancySelectJs.prototype.selectIndex=function(e){if(this.multiple){if(this.allIndexSelected&&this.allIndex==e)return;this.allIndexSelected&&(this.values=[],this.selectedIndices=[]),this.allIndexSelected=this.allIndex==e;var t=this.selectedIndices.indexOf(e);-1==t?(this.values.push(this.options[e]),this.selectedIndices.push(e)):(this.selectedIndices.splice(t,1),this.values.splice(t,1))}else this.values=[],this.selectedIndices=[],this.values.push(this.options[e]),this.selectedIndices.push(e);this.hoverIndex=e,this.updateValues()},fancySelectJs.prototype.optionClick=function(e){this.selectIndex($(e.target).index()),this.multiple||this.hideDropdown()},fancySelectJs.prototype.optionHover=function(e){if(this.mouseX!==e.clientX||this.mouseY!==e.clientY){if(this.mouseX=e.clientX,this.mouseY=e.clientY,e.target.hasAttribute("data-hover"))return;this.highlightIndex($(e.target).index())}},fancySelectJs.prototype.keydown=function(e){if(!this.disabled&&0!=this.options.length){var t=e.keyCode;if(this.dropdownVisible&&(t>47&&58>t||t>64&&91>t||t>95&&106>t)){clearTimeout(this.searchTimer),this.searchString+=String.fromCharCode(t);for(var i=-1,s=0,o=this.options.length;o>s;s++)if(this.options[s].label.toUpperCase().replace(/\s/,"").startsWith(this.searchString)){i=s;break}if(this.searchTimer=setTimeout(this.resetSearchString.bind(this),800),-1===i)return;return this.multiple?this.highlightIndex(i):this.selectIndex(i),void this.scrollOptionIntoView(i)}return 32==t?(e.preventDefault(),void(this.dropdownVisible&&null!=this.hoverIndex&&this.selectIndex(this.hoverIndex))):13==t?void(this.dropdownVisible&&(this.hideDropdown(),e.preventDefault())):27==t?void(this.dropdownVisible&&(this.hideDropdown(),e.preventDefault())):40==t||38==t?void(this.dropdownVisible&&(40==t?null==this.hoverIndex?this.hoverIndex=this.options.length-1:this.hoverIndex++:null==this.hoverIndex?this.hoverIndex=0:this.hoverIndex--,this.hoverIndex<0?this.hoverIndex=this.options.length-1:this.hoverIndex>=this.options.length&&(this.hoverIndex=0),this.multiple?this.highlightIndex(this.hoverIndex):this.selectIndex(this.hoverIndex),this.scrollOptionIntoView(this.hoverIndex),e.preventDefault())):void 0}},fancySelectJs.prototype.resetSearchString=function(){clearTimeout(this.searchTimer),this.searchString=""},fancySelectJs.prototype.blur=function(){return document.activeElement===this.DOM_dropdown?void e.target.focus():void this.hideDropdown()},fancySelectJs.prototype.dropdownMousedown=function(e){e.preventDefault()},fancySelectJs.prototype.selectClick=function(e){!this.disabled&&$(e.target).hasClass("select")&&this.toggleDropdown()},fancySelectJs.prototype.reset=function(){this.selectedIndices=[],this.values=[],this.updateValues()},fancySelectJs.prototype.setValue=function(e){this.selectedIndices=[],this.values=[];for(var t,i=e.replace(/^\[|\]$/,"").split(this.DELIMITER),s=0,o=this.options.length;o>s;s++)t=this.options[s],i.includes(t.value)&&(this.selectedIndices.push(s),this.values.push(t));this.updateValues()},fancySelectJs.prototype.getValue=function(){return $(this.template).val()},fancySelectJs.prototype.disable=function(){this.disabled=!0,this.select.setAttribute("data-disabled","true"),this.select.tabIndex=-1,this.hideDropdown()},fancySelectJs.prototype.enable=function(){this.disabled=!1,this.select.removeAttribute("data-disabled"),this.select.tabIndex=0},fancySelectJs.prototype.highlightIndex=function(e){for(var t,i=this.dropdown.children,s=0,o=i.length;o>s;s++)t=i[s],s==e?(t.setAttribute("data-hover","true"),this.hoverIndex=s):t.removeAttribute("data-hover")},fancySelectJs.prototype.showDropdown=function(){this.dropdownVisible||(this.queuePositionDropdown(),this.select.setAttribute("data-dropdown","visible"),this.dropdown.setAttribute("data-visible","true"),this.dropdownVisible=!0)},fancySelectJs.prototype.hideDropdown=function(){this.dropdownVisible&&(this.select.removeAttribute("data-dropdown"),this.dropdown.removeAttribute("data-visible"),this.dropdownVisible=!1)},fancySelectJs.prototype.toggleDropdown=function(){this.dropdownVisible?this.hideDropdown():this.showDropdown()},fancySelectJs.prototype.queuePositionDropdown=function(){var e=this.select;if(null===e.offsetParent)this.hideDropdown();else{var t=this.parent,i=$(e).offset(),s=$(t).offset(),o=this.dropdownTop,n=this.dropdownLeft,l=this.dropdownWidth;t==document.body?(this.dropdownTop=i.top-s.top+$(e).outerHeight(!1)+parseInt($(t).css("marginTop")),this.dropdownLeft=i.left-s.left+parseInt($(t).css("marginLeft"))):(this.dropdownTop=i.top-s.top+$(t).scrollTop()+$(e).outerHeight(),this.dropdownLeft=i.left-s.left+$(t).scrollLeft()),this.dropdownWidth=Math.floor($(e).outerWidth(!1)),(o!=this.dropdownTop||n!=this.dropdownLeft||l!=this.dropdownWidth)&&(window.requestAnimationFrame?this.frameRequested||(window.requestAnimationFrame(this.positionDropdown.bind(this)),this.frameRequested=!0):this.positionDropdown())}},fancySelectJs.prototype.positionDropdown=function(){$(this.dropdown).css({top:this.dropdownTop,left:this.dropdownLeft}),$(this.dropdown).outerWidth(this.dropdownWidth),this.frameRequested=!1},fancySelectJs.prototype.scrollOptionIntoView=function(e){var t=this.dropdown,i=t.children[e],s=$(i).position().top,o=$(i).innerHeight(),n=($(t).offset().top,$(t).innerHeight());0>s?t.scrollTop+=s:s+o>n&&(t.scrollTop+=s+o-n),$(i).offset().top<$(window).scrollTop()?i.scrollIntoView(!0):$(i).offset().top+$(i).innerHeight()>$(window).scrollTop()+window.innerHeight&&i.scrollIntoView(!1)},Array.prototype.includes||(Array.prototype.includes=function(e){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),i=parseInt(t.length,10)||0;if(0===i)return!1;var s,o=parseInt(arguments[1],10)||0;o>=0?s=o:(s=i+o,0>s&&(s=0));for(var n;i>s;){if(n=t[s],e===n||e!==e&&n!==n)return!0;s++}return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError('"this" is null or not defined');var s=Object(this),o=s.length>>>0;if(0===o)return-1;var n=+t||0;if(1/0===Math.abs(n)&&(n=0),n>=o)return-1;for(i=Math.max(n>=0?n:o-Math.abs(n),0);o>i;){if(i in s&&s[i]===e)return i;i++}return-1});