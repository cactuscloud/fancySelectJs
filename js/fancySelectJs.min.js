function fancySelectJs(t){this.DELIMITER=",",this.select=null,this.selectText=null,this.dropdown=null,this.template=null,this.parent=null,this.multiple=!1,this.disabled=!1,this.length=0,this.options=[],this.values=[],this.selectedIndices=[],this.frameRequested=!1,this.dropdownTop,this.dropdownLeft,this.dropdownWidth,this.dropdownVisible=!1,this.mouseY,this.mouseX,this.searchString="",this.searchTimer,this.initialized=!1,this.hoverIndex=0,this.placeholder="",this.multiplePlaceholder="Multiple Values",this.allPlaceholder="All",this.allIndex=null,this.allIndexSelected=!1,"undefined"!=typeof t&&t&&this.init(t)}Array.prototype.includes||(Array.prototype.includes=function(t){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var e=Object(this),i=parseInt(e.length,10)||0;if(0===i)return!1;var s,n=parseInt(arguments[1],10)||0;n>=0?s=n:(s=i+n,0>s&&(s=0));for(var o;i>s;){if(o=e[s],t===o||t!==t&&o!==o)return!0;s++}return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var s=Object(this),n=s.length>>>0;if(0===n)return-1;var o=+e||0;if(1/0===Math.abs(o)&&(o=0),o>=n)return-1;for(i=Math.max(o>=0?o:n-Math.abs(o),0);n>i;){if(i in s&&s[i]===t)return i;i++}return-1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),fancySelectJs.prototype.init=function(t){if(null==t.fancySelectJs&&!this.initialized){if(this.template=t,"undefined"==typeof t||!t)throw new TypeError("fancySelectJs requires a valid HTML SELECT element to initialize.");if("string"==typeof t&&(t=document.getElementById(t)),"undefined"==typeof t.tagName||!t.tagName)throw new TypeError("fancySelectJs requires a valid HTML SELECT element to initialize.");this.placeholder=t.getAttribute("data-placeholder")||"",this.multiple=t.multiple,t.oldSize=t.size,t.size=1;var e=[];t.hasAttribute("data-value")?this.multiple?e=t.getAttribute("data-value").split(this.DELIMITER):e.push(t.getAttribute("data-value")):this.multiple?e=($(t).val()+"").split(","):e.push($(t).val());for(var i,s,n,o=t.children,l=0,r=o.length;r>l;l++)i=o[l],this.multiple&&i.hasAttribute("data-all")&&(this.allIndex=l),s=i.getAttribute("value").trim(),n={value:s,label:o[l].innerHTML.trim()},this.options.push(n),e.includes(s)&&(this.values.push(n),this.selectedIndices.push(l),this.allIndex==l&&(this.allIndexSelected=!0));t.hasAttribute("data-all-index")&&(this.allIndex=parseInt(t.getAttribute("data-all-index")));var h=document;if(t.hasAttribute("data-scroll-parent")){var d=h.getElementById(t.getAttribute("data-scroll-parent"));this.parent="undefined"!=typeof d&&null!=d?d:h.body}else this.parent=h.body;this.buildGui(t),this.setEventListeners(),this.updateValues(),1==this.values.length&&(this.hoverIndex=this.selectedIndices[0]),t.disabled&&this.disable(),$(t).hide(),t.parentElement.insertBefore(this.select,t),this.parent.appendChild(this.dropdown),t.fancySelectJs=this,this.initialized=!0}},fancySelectJs.prototype.buildGui=function(t){var e=document,i=e.createElement("div");i.className="fancySelectJs "+t.className,i.display=$(t).css("display"),i.style.display=$(t).css("display"),i.style.opacity=$(t).css("opacity"),i.setAttribute("role","listbox");var s=e.createElement("div");s.className="select",s.tabIndex=0,s.style.lineHeight=$(t).outerHeight()+"px",s.style.height=$(t).css("height"),i.appendChild(s);var n=e.createElement("div");n.className="fancySelectJs_dropdown",this.multiple&&n.setAttribute("data-multiple","true");for(var o=t.children,l="",r=0,h=o.length;h>r;r++)l+=this.multiple?'<div role="option" class="option check" aria-checked="false">'+o[r].innerHTML+"</div>":'<div role="option" class="option" aria-selected="false">'+o[r].innerHTML+"</div>";n.innerHTML=l,this.selectText=s,this.select=i,this.dropdown=n},fancySelectJs.prototype.setEventListeners=function(){$(window).on("resize orientationchange",this.queuePositionDropdown.bind(this)),$(this.template).closest("form").on("reset",this.reset.bind(this)),$(this.select).on("click",this.selectClick.bind(this)),$(this.selectText).on("blur",this.blur.bind(this)),$(this.selectText).on("keydown",this.keydown.bind(this)),$(this.dropdown).on("mousedown",this.dropdownMousedown.bind(this)),$(this.dropdown.children).on("click",this.optionClick.bind(this)),$(this.dropdown.children).on("mousemove",this.optionHover.bind(this))},fancySelectJs.prototype.destroy=function(){try{clearTimeout(this.searchTimer),this.template.fancySelectJs=null,this.dropdown.innerHTML="",this.select.innerHTML="",this.dropdown.parentNode.removeChild(this.dropdown),this.select.parentNode.removeChild(this.select),this.select=null,this.selectText=null,this.dropdown=null,this.template.size=this.template.oldSize,$(this.template).show(),this.template=null,this.parent=null,this.options=null,this.values=null,this.selectedIndices=null}catch(t){console.log(t)}},fancySelectJs.prototype.updateValues=function(){(this.allIndexSelected||null!=this.allIndex&&0==this.values.length)&&(this.values=[],this.selectedIndices=[],this.values.push(this.options[this.allIndex]),this.selectedIndices.push(this.allIndex),this.allIndexSelected=!0);for(var t,e=this.dropdown.children,i=0,s=e.length;s>i;i++)t=e[i],t.removeAttribute("data-hover"),this.selectedIndices.includes(i)?(t.setAttribute("data-selected","true"),this.multiple?t.setAttribute("aria-checked","true"):t.setAttribute("aria-selected","true")):(t.removeAttribute("data-selected"),this.multiple?t.setAttribute("aria-checked","false"):t.setAttribute("aria-selected","false"));var n=this.selectedIndices.length;if(0==n?(this.selectText.innerHTML=this.placeholder,this.selectText.setAttribute("data-placeholder","true")):(this.selectText.removeAttribute("data-placeholder"),this.selectText.innerHTML=1==n?this.values[0].label:n==e.length?this.allPlaceholder:this.multiplePlaceholder),this.allIndexSelected){this.values=[],this.selectedIndices=[];for(var i=0,s=this.options.length;s>i;i++)i!=this.allIndex&&(this.values.push(this.options[i]),this.selectedIndices.push(i))}if(this.initialized||this.allIndexSelected){for(var o=[],i=0,s=this.values.length;s>i;i++)o.push(this.values[i].value);$(this.template).val(o),$(this.template).trigger("onchange")}},fancySelectJs.prototype.selectIndex=function(t){if(this.multiple){if(this.allIndexSelected&&this.allIndex==t)return;this.allIndexSelected&&(this.values=[],this.selectedIndices=[]),this.allIndexSelected=this.allIndex==t;var e=this.selectedIndices.indexOf(t);-1==e?(this.values.push(this.options[t]),this.selectedIndices.push(t)):(this.selectedIndices.splice(e,1),this.values.splice(e,1))}else this.values=[],this.selectedIndices=[],this.values.push(this.options[t]),this.selectedIndices.push(t);this.hoverIndex=t,this.updateValues()},fancySelectJs.prototype.optionClick=function(t){this.selectIndex($(t.target).index()),this.multiple||this.hideDropdown()},fancySelectJs.prototype.optionHover=function(t){if(this.mouseX!==t.clientX||this.mouseY!==t.clientY){if(this.mouseX=t.clientX,this.mouseY=t.clientY,t.target.hasAttribute("data-hover"))return;this.highlightIndex($(t.target).index())}},fancySelectJs.prototype.keydown=function(t){if(!this.disabled&&0!=this.options.length){var e=t.keyCode;if(this.dropdownVisible&&(e>47&&58>e||e>64&&91>e||e>95&&106>e)){clearTimeout(this.searchTimer),this.searchString+=String.fromCharCode(e);for(var i=-1,s=0,n=this.options.length;n>s;s++)if(this.options[s].label.toUpperCase().replace(/\s/,"").startsWith(this.searchString)){i=s;break}if(this.searchTimer=setTimeout(this.resetSearchString.bind(this),800),-1===i)return;return this.multiple?this.highlightIndex(i):this.selectIndex(i),void this.scrollOptionIntoView(i)}return 32==e?(t.preventDefault(),void(this.dropdownVisible&&null!=this.hoverIndex&&this.selectIndex(this.hoverIndex))):13==e?void(this.dropdownVisible&&(this.hideDropdown(),t.preventDefault())):27==e?void(this.dropdownVisible&&(this.hideDropdown(),t.preventDefault())):40==e||38==e?void(this.dropdownVisible&&(40==e?null==this.hoverIndex?this.hoverIndex=this.options.length-1:this.hoverIndex++:null==this.hoverIndex?this.hoverIndex=0:this.hoverIndex--,this.hoverIndex<0?this.hoverIndex=this.options.length-1:this.hoverIndex>=this.options.length&&(this.hoverIndex=0),this.multiple?this.highlightIndex(this.hoverIndex):this.selectIndex(this.hoverIndex),this.scrollOptionIntoView(this.hoverIndex),t.preventDefault())):void 0}},fancySelectJs.prototype.resetSearchString=function(){clearTimeout(this.searchTimer),this.searchString=""},fancySelectJs.prototype.blur=function(){return document.activeElement===this.DOM_dropdown?void e.target.focus():void this.hideDropdown()},fancySelectJs.prototype.dropdownMousedown=function(t){t.preventDefault()},fancySelectJs.prototype.selectClick=function(t){!this.disabled&&$(t.target).hasClass("select")&&this.toggleDropdown()},fancySelectJs.prototype.reset=function(){this.selectedIndices=[],this.values=[],this.updateValues()},fancySelectJs.prototype.setValue=function(t){this.selectedIndices=[],this.values=[];var e,i=fancySelectJs.parseData(t,this.DELIMITER);if(!Array.isArray(i))throw new TypeError("fancySelectJs.setValue requires either a string or an array to function");for(var s=0,n=this.options.length;n>s;s++)e=this.options[s],i.includes(e.value.trim())&&(this.selectedIndices.push(s),this.values.push(e));this.updateValues()},fancySelectJs.parseData=function(t,e){if(("undefined"==typeof e||e)&&(e=","),"string"==typeof t){var i=t.substr(0,1),s=t.substr(t.length-1,1);return"["==i&&"]"==s?t.replace(/^\[|\]$/,"").split(e):"("==i&&")"==s?t.replace(/^\(|\)$/,"").split(e):t.split(e)}return Array.isArray(t)?t:null},fancySelectJs.prototype.getValue=function(){return $(this.template).val()},fancySelectJs.prototype.disable=function(){this.disabled=!0,this.select.setAttribute("data-disabled","true"),this.select.tabIndex=-1,this.hideDropdown()},fancySelectJs.prototype.enable=function(){this.disabled=!1,this.select.removeAttribute("data-disabled"),this.select.tabIndex=0},fancySelectJs.prototype.highlightIndex=function(t){for(var e,i=this.dropdown.children,s=0,n=i.length;n>s;s++)e=i[s],s==t?(e.setAttribute("data-hover","true"),this.hoverIndex=s):e.removeAttribute("data-hover")},fancySelectJs.prototype.showDropdown=function(){this.dropdownVisible||(this.queuePositionDropdown(),this.select.setAttribute("data-dropdown","visible"),this.dropdown.setAttribute("data-visible","true"),this.dropdownVisible=!0)},fancySelectJs.prototype.hideDropdown=function(){this.dropdownVisible&&(this.select.removeAttribute("data-dropdown"),this.dropdown.removeAttribute("data-visible"),this.dropdownVisible=!1)},fancySelectJs.prototype.toggleDropdown=function(){this.dropdownVisible?this.hideDropdown():this.showDropdown()},fancySelectJs.prototype.queuePositionDropdown=function(){var t=this.select;if(null===t.offsetParent)this.hideDropdown();else{var e=this.parent,i=$(t).offset(),s=$(e).offset(),n=this.dropdownTop,o=this.dropdownLeft,l=this.dropdownWidth;e==document.body?(this.dropdownTop=i.top-s.top+$(t).outerHeight(!1)+parseInt($(e).css("marginTop")),this.dropdownLeft=i.left-s.left+parseInt($(e).css("marginLeft"))):(this.dropdownTop=i.top-s.top+$(e).scrollTop()+$(t).outerHeight(),this.dropdownLeft=i.left-s.left+$(e).scrollLeft()),this.dropdownWidth=Math.floor($(t).outerWidth(!1)),(n!=this.dropdownTop||o!=this.dropdownLeft||l!=this.dropdownWidth)&&(window.requestAnimationFrame?this.frameRequested||(window.requestAnimationFrame(this.positionDropdown.bind(this)),this.frameRequested=!0):this.positionDropdown())}},fancySelectJs.prototype.positionDropdown=function(){$(this.dropdown).css({top:this.dropdownTop,left:this.dropdownLeft}),$(this.dropdown).outerWidth(this.dropdownWidth),this.frameRequested=!1},fancySelectJs.prototype.scrollOptionIntoView=function(t){var e=this.dropdown,i=e.children[t],s=$(i).position().top,n=$(i).innerHeight(),o=($(e).offset().top,$(e).innerHeight());0>s?e.scrollTop+=s:s+n>o&&(e.scrollTop+=s+n-o),$(i).offset().top<$(window).scrollTop()?i.scrollIntoView(!0):$(i).offset().top+$(i).innerHeight()>$(window).scrollTop()+window.innerHeight&&i.scrollIntoView(!1)};